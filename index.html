<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<title>Digital clock wallpaper</title>

		<link rel="stylesheet" href="./assets/css/style.css" />
	</head>

	<body>
       
        <main>
            <div class="clock" id="clock" data-hours="12" data-minutes="36" data-seconds="52">
                <div class="digit">
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
                <div class="digit">
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
                <div class="digit">
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
                <div class="digit">
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
                <div class="digit">
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
                <div class="digit">
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
            </div>
            <div class="date" id="date">
                wed 15-02-22
            </div>
            <div class="logo">
                <img src="./assets/img/logo.png" alt="">
            </div>
            
        </main>
		<div class="filter">
            <img src="./assets/img/noise.png" alt="">
        </div>
		<script>
            const clock = document.getElementById('clock');
            const dateEl = document.getElementById('date');

            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
            "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
            ];

            setInterval(changeTime, 1000);

            const getNormalValue = val => val < 10 ? `0${val}` : val;

            function changeTime(){
                const date = new Date();
                clock.dataset.hours = getNormalValue(date.getHours());
                clock.dataset.minutes = getNormalValue(date.getMinutes());
                clock.dataset.seconds = getNormalValue(date.getSeconds());
                dateEl.innerText = `${monthNames[date.getMonth()]} ${getNormalValue(date.getDate())}-${getNormalValue(date.getMonth())}-${getNormalValue(date.getFullYear())}`
            }
        </script>

        <script>
            window.wallpaperPropertyListener = {
                applyUserProperties: function(properties) {
                    if (properties.color) {
                        const color = properties.color.value.split(' ').map(function(c) {
                            return Math.ceil(c * 255);
                        });
                        const cssColor = 'rgb(' + color + ')';
                        document.body.style.setProperty('--main-color', cssColor)
                    }
                },
            };
        </script>
	</body>
</html>
